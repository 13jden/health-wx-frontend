<view class="container">
  <!-- 孩子基本信息 -->
  <view class="header">
    <image class="avatar" src="{{child.avatar || (child.gender == '男' ? '/assets/icons/boy.png' : '/assets/icons/girl.png')}}" />
    <view class="info">
      <text class="name">{{child.name}}</text>
      <text class="details">性别：{{child.gender}} | 年龄：{{age}} 岁</text>
      <text class="birth">出生日期：{{child.birth_time}}</text>
    </view>
  </view>
  
  <text class="name">{{child.name}}身高变化趋势</text>

  <!-- 身高图表 -->
  <view class="chart-section">
    <text class="chart-title">身高变化</text>
    <view class="charts">
      <ec-canvas id="mychart-height" canvas-id="mychart-height" ec="{{ ec }}"></ec-canvas>
    </view>
  </view>
  
  <!-- 了解生长曲线 -->
  <navigator url="/pages/detail_h/detail_h" class="learn-more">
    了解生长曲线图和百分位 >
  </navigator>
</view>

<!-- 自定义 Tooltip 悬浮框（放在 container 外，避免被 canvas 穿透） -->
<view class="tooltip-overlay" wx:if="{{showTooltip}}" bindtap="closeTooltip">
  <view class="tooltip-box" style="left: {{tooltipData.x}}px; top: {{tooltipData.y}}px;" catchtap="stopPropagation">
    <view class="tooltip-title">{{tooltipData.ageLabel}}</view>
    <view class="tooltip-content">
      <view class="tooltip-item" wx:for="{{tooltipData.items}}" wx:key="index">
        <text class="tooltip-text">{{item.name}}: {{item.value}}</text>
      </view>
    </view>
  </view>
</view>