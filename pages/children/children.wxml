<view class="container">
  <button class="add-btn" bindtap="onShowAddChildModal">
    {{children.length ? "编辑宝宝信息" : "+ 添加宝宝"}}
  </button>

  <view class="child-list">
    <block wx:if="{{children.length > 0}}">
      <block wx:for="{{children}}" wx:key="id">
      <view class="child-card">
        <image class="child-icon" src="{{item.gender === '男' ? '/assets/icons/boy.png' : '/assets/icons/girl.png'}}" />
        <view class="child-info">
          <text class="child-name">{{item.name}}</text>
          <text class="child-age">年龄: {{item.age}} 岁</text>
        </view>
       <!-- 编辑 & 删除 -->
        <view class="icon-group">
          <image class="icon-btn" src="/assets/icons/eye.png" data-id="{{item.id}}" bindtap="onDetailChild" />
          <image class="icon-btn" src="/assets/icons/edit.png" data-id="{{item.id}}" bindtap="onEditChild" />
          <image class="icon-btn" src="/assets/icons/delete.png" data-id="{{item.id}}" bindtap="onDeleteChild" />
        </view>
      </view>
      </block>
    </block>

    <view class="empty-state" wx:if="{{children.length === 0}}">
      <text class="empty-text">暂无孩子信息</text>
      <text class="empty-hint">点击上方按钮添加孩子</text>
    </view>
  </view>


<!-- 添加/编辑宝宝弹出框 -->
<view wx:if="{{showChildModal}}" class="modal">
  <view class="modal-content">
    <text class="modal-title">{{isEditing ? "编辑宝宝" : "添加宝宝"}}</text>
    
    <input class="input" placeholder="请输入姓名" value="{{name}}" bindinput="onNameInput" />

    <picker mode="selector" range="{{genderOptions}}" value="{{genderIndex}}" bindchange="onGenderChange">
      <view class="picker">性别: <text class="picker-text">{{genderOptions[genderIndex]}}</text></view>
    </picker>

     <picker mode="date" value="{{birthdate}}" bindchange="onBirthdateChange">
       <view class="picker">出生日期: <text class="picker-text">{{birthdate || '请选择出生日期'}}</text></view>
     </picker>
     
     <input class="input" type="number" placeholder="身高(cm)" value="{{height}}" bindinput="onHeightInput" />
     
     <input class="input" type="number" placeholder="体重(kg)" value="{{weight}}" bindinput="onWeightInput" />
     
     <input class="input" type="number" placeholder="BMI" value="{{bmi}}" bindinput="onBmiInput" disabled="{{true}}" />
     
     <input class="input" type="number" placeholder="骨龄" value="{{boneAge}}" bindinput="onBoneAgeInput" />
     
     <picker mode="date" value="{{testDate}}" bindchange="onTestDateChange">
       <view class="picker">检测日期: <text class="picker-text">{{testDate || '请选择检测日期'}}</text></view>
     </picker>

    <view class="modal-actions">
      <button class="cancel-btn" bindtap="onCancel">取消</button>
      <button class="confirm-btn" bindtap="onSaveChild">{{isEditing ? "更新" : "确认"}}</button>
    </view>
  </view>
</view>
</view>